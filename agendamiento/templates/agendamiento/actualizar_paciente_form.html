{% extends "agendamiento/base.html" %}
{% load static %}

{% block title %}{{ titulo_pagina|default:"Actualizar Información" }}{% endblock %}

{% block navigation %}
    <a href="{% url 'agendamiento:dashboard_asesor' %}">Dashboard</a>
    <a href="{% url 'agendamiento:registrar_paciente' %}">Registrar Paciente</a>
    <a href="{% url 'agendamiento:listar_pacientes' %}">Gestionar Pacientes</a>
    <a href="{% url 'agendamiento:consultar_disponibilidad' %}">Consultar Disponibilidad</a>
    <a href="{% url 'agendamiento:visualizar_citas_gestionadas' %}">Citas Gestionadas</a>
{% endblock %}

{% block content %}
<div class="form-asesor-container">
    <h1>{{ titulo_pagina|default:"Actualizar Datos del Paciente" }}</h1>

    {% if messages %}
    <ul class="messages">
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}    <form method="post" novalidate> {# La action se omite, se enviará a la misma URL #}
        {% csrf_token %}
        
        <div class="form-section">
            <h3>Datos de la Cuenta de Usuario</h3>
            {{ user_form.as_p }}
        </div>

        <div class="form-section">
            <h3>Datos del Paciente</h3>
            {{ paciente_form.as_p }}
        </div>

        <button type="submit" class="btn btn-primary btn-full">Guardar Cambios</button> {# Texto del botón cambiado #}
    </form>
    
    <div class="back-link-container">
        <a href="{% url 'agendamiento:listar_pacientes' %}" class="back-link">Volver al Listado de Pacientes</a> {# Enlace cambiado #}
    </div>
</div>
{% endblock %}